This project contains fast Java implementations of <a href="http://en.wikipedia.org/wiki/Segment_tree">segment trees</a>, which are binary tree structures to efficiently locate all ranges overlapping a given point.

Currently, only long values are supported (LongRangeMultiSet and its Builder).  Ranges are allowed to overlap, so multiple ranges can match a given point.

Segment trees require O(log(N) + M) time for each query ("find all ranges overlapping a point"), where N is the total number of ranges and M is the number of ranges matching the current point.

Under the hood I use the <a href="http://asm.ow2.org/">asm</a> library to create specialized java bytecode to find matching ranges for a given point and increment counts.

The code is not general purpose: currently it only exposes an increment(int[], value) method, which increments by 1 the count of each range that the value falls within.  But, the code could be easily generalized to do something else with each matched range.
